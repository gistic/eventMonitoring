"use strict";var eventAdminApp=angular.module("eventAdminApp",["ui.bootstrap","timer","ngCookies","angularFileUpload"]);eventAdminApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),eventAdminApp.filter("reverseQueue",function(){return function(a){return a.slice().reverse()}}),eventAdminApp.factory("appVar",function(a){return{eventHashtag:function(){return a.eventHashtag=$("#eventHashtag").val(),""!==a.eventHashtag||a.eventHashtag.length>=3?a.eventHashtag:""},link:function(){return"http://www.twitter.com"}}}),eventAdminApp.factory("getData",["$http","$rootScope","appVar","$cookies","$cookieStore",function(a,b,c,d,e){return{startEvent:function(c){var d=$("#eventHashtag").val();return a({method:"POST",url:"/api/events",data:{hashTags:[d]}}).success(function(a){return b.eventID=a.uuid,a.uuid}).error(function(){console.log("Request failed")})},stopEvent:function(c){return b.stopEventUrl="/api/events/"+c,a({method:"DELETE",url:b.stopEventUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},approveTweet:function(c,d){return b.approveTweetUrl="http://localhost:8080/api/events/"+c+"/approvedTweets/"+d,a({method:"POST",url:b.approveTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},removeTweet:function(c,d){return b.removeTweetUrl="api/events/"+c+"/blockedTweets/"+d,a({method:"POST",url:b.removeTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},updateViewOptions:function(c,d,e){return b.updateViewOptionsUrl="api/events/"+c+"/config",b.userScreen=["Small","Normal","Large"],a({method:"PUT",url:b.updateViewOptionsUrl,data:{backgroundColor:d,screens:b.userScreen,size:e}}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed"),console.log(c),console.log(d),console.log(b.userScreen),console.log(e)})}}}]),eventAdminApp.factory("shareData",function(a,b,c,d){return a.layoutColors=["black","turquoise","blue","violet","pink","green","orange"],a.layoutColor=function(c){a.userColor=a.layoutColors[c],b.userColor=a.userColor},a.layoutSizes=["Small","Normal","Large"],a.layoutSize=function(c){a.userSize=a.layoutSizes[c],b.userSize=a.userSize},{userColor:function(){return b.userColor},userSize:function(){return b.userSize}}}),eventAdminApp.controller("liveViewCtrl",function(a,b,c,d,e,f){}),eventAdminApp.factory("getTrustedUsers",function(){var a={};return a.data=[{name:"iMomenUI",img:"../assets/images/user-image-1.png"},{name:"JustSmileDad",img:"../assets/images/user-image-2.png"},{name:"AngularJS",img:"../assets/images/user-image-3.png"}],a}),eventAdminApp.controller("trustedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"trustedUsers.html",controller:"trustedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("trustedUsersCtrl",function(a,b,c){a.items=c,a.addTrustedUsername=function(){c.data.push({name:a.trustedUsername,img:"../assets/images/user-image-1.png"})},a.deleteTrustedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.factory("getBlockedUsers",function(){var a={};return a.data=[{name:"UQU",img:"../assets/images/user-image-6.png"},{name:"OSN",img:"../assets/images/user-image-4.png"},{name:"GISTIC",img:"../assets/images/user-image-1.png"}],a}),eventAdminApp.controller("blockedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"blockedUsers.html",controller:"blockedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("blockedUsersCtrl",function(a,b,c){a.items=c,a.addBlockedUsername=function(){c.data.push({name:a.blockedUsername,img:"../assets/images/user-image-1.png"})},a.deleteBlockedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.run(function(a){a.eventID}),eventAdminApp.controller("startEventCtrl",["$rootScope","$scope","$http","$cookies","$cookieStore","$location","$window","getData","appVar","shareData",function(a,b,c,d,e,f,g,h,i,j){a.userColor=j.userColor(),a.userSize=j.userSize(),b.eventStarted=!1,b.timerRunning=!1,b.tweetsQueue=[],b.tweetsCount=0,b.tweet={},b.startEventHandler=function(c){b.$broadcast("timer-start"),b.timerRunning=!0,h.startEvent().success(function(c){b.eventStarted=!0,a.eventID=c.uuid,b.adminUrl="/admin/admin.html?uuid="+b.eventID,g.location.href=b.adminUrl,d.eventID=a.eventID,console.log("New Event Started"),console.log(a.eventID)})},b.eventSourceUrl="/api/adminLiveTweets?uuid="+d.eventID;var k=new EventSource(b.eventSourceUrl);k.addEventListener("message",function(a){b.tweet=JSON.parse(a.data),b.$apply(function(){b.tweetsQueue.push(b.tweet),b.tweetsCount=b.tweetsQueue.length},!1)}),b.pagesShown=1,b.pageSize=20,b.tweetsQueueLimit=function(){return b.pageSize*b.pagesShown},b.loadMoreButton=function(){return b.pagesShown<b.tweetsCount/b.pageSize},b.loadMoreTweets=function(){b.pagesShown=b.pagesShown+1},b.removedTweetsCount=0,b.removeTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.removeTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.removedTweetsCount++,console.log("Tweet Removed")})},b.approvedTweetsCount=0,b.approveTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.approveTweet(e,c).then(function(a){console.log("Tweet Approved"),$("#"+c).remove(),b.approvedTweetsCount++})},b.approveStarred=function(a){var b=$(a.currentTarget).parent().parent().parent().attr("id"),d={action:"approve_starred",tweet_id:b},e=c.post("do",d);e.success(function(a,c,d,e){"OK"==a?$("#"+b).remove():alert(a)})},b.stopEventHandler=function(){var a=d.eventID;h.stopEvent(a).then(function(a){b.eventStarted=!1,b.$broadcast("timer-stop"),b.timerRunning=!1,b.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),console.log("Event Stopped")})},b.updateViewOptions=function(){var a=d.eventID,b=j.userColor(),c=j.userSize();h.updateViewOptions(a,b,c).then(function(d){console.log("Options Updated"),console.log(a),console.log(b),console.log(c)})}}]),eventAdminApp.controller("AppController",["$scope","FileUploader",function(a,b){var c=a.uploader=new b({url:"upload.php"});c.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}})}]),eventAdminApp.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]);var eventAdminApp=angular.module("eventAdminApp",["ui.bootstrap","timer","ngCookies","angularFileUpload"]);eventAdminApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),eventAdminApp.filter("reverseQueue",function(){return function(a){return a.slice().reverse()}}),eventAdminApp.factory("appVar",function(a){return{eventHashtag:function(){return a.eventHashtag=$("#eventHashtag").val(),""!==a.eventHashtag||a.eventHashtag.length>=3?a.eventHashtag:""},link:function(){return"http://www.twitter.com"}}}),eventAdminApp.factory("getData",["$http","$rootScope","appVar","$cookies","$cookieStore",function(a,b,c,d,e){return{startEvent:function(c){var d=$("#eventHashtag").val();return a({method:"POST",url:"/api/events",data:{hashTags:[d]}}).success(function(a){return b.eventID=a.uuid,a.uuid}).error(function(){console.log("Request failed")})},stopEvent:function(c){return b.stopEventUrl="/api/events/"+c,a({method:"DELETE",url:b.stopEventUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},approveTweet:function(c,d){return b.approveTweetUrl="http://localhost:8080/api/events/"+c+"/approvedTweets/"+d,a({method:"POST",url:b.approveTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},removeTweet:function(c,d){return b.removeTweetUrl="api/events/"+c+"/blockedTweets/"+d,a({method:"POST",url:b.removeTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},updateViewOptions:function(c,d,e){return b.updateViewOptionsUrl="api/events/"+c+"/config",b.userScreen=["Small","Normal","Large"],a({method:"PUT",url:b.updateViewOptionsUrl,data:{backgroundColor:d,screens:b.userScreen,size:e}}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed"),console.log(c),console.log(d),console.log(b.userScreen),console.log(e)})}}}]),eventAdminApp.factory("shareData",function(a,b,c,d){return a.layoutColors=["black","turquoise","blue","violet","pink","green","orange"],a.layoutColor=function(c){a.userColor=a.layoutColors[c],b.userColor=a.userColor},a.layoutSizes=["Small","Normal","Large"],a.layoutSize=function(c){a.userSize=a.layoutSizes[c],b.userSize=a.userSize},{userColor:function(){return b.userColor},userSize:function(){return b.userSize}}}),eventAdminApp.controller("liveViewCtrl",function(a,b,c,d,e,f){}),eventAdminApp.factory("getTrustedUsers",function(){var a={};return a.data=[{name:"iMomenUI",img:"../assets/images/user-image-1.png"},{name:"JustSmileDad",img:"../assets/images/user-image-2.png"},{name:"AngularJS",img:"../assets/images/user-image-3.png"}],a}),eventAdminApp.controller("trustedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"trustedUsers.html",controller:"trustedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("trustedUsersCtrl",function(a,b,c){a.items=c,a.addTrustedUsername=function(){c.data.push({name:a.trustedUsername,img:"../assets/images/user-image-1.png"})},a.deleteTrustedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.factory("getBlockedUsers",function(){var a={};return a.data=[{name:"UQU",img:"../assets/images/user-image-6.png"},{name:"OSN",img:"../assets/images/user-image-4.png"},{name:"GISTIC",img:"../assets/images/user-image-1.png"}],a}),eventAdminApp.controller("blockedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"blockedUsers.html",controller:"blockedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("blockedUsersCtrl",function(a,b,c){a.items=c,a.addBlockedUsername=function(){c.data.push({name:a.blockedUsername,img:"../assets/images/user-image-1.png"})},a.deleteBlockedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.run(function(a){a.eventID}),eventAdminApp.controller("startEventCtrl",["$rootScope","$scope","$http","$cookies","$cookieStore","$location","$window","getData","appVar","shareData",function(a,b,c,d,e,f,g,h,i,j){a.userColor=j.userColor(),a.userSize=j.userSize(),b.eventStarted=!1,b.timerRunning=!1,b.tweetsQueue=[],b.tweetsCount=0,b.tweet={},b.startEventHandler=function(c){b.$broadcast("timer-start"),b.timerRunning=!0,h.startEvent().success(function(c){b.eventStarted=!0,a.eventID=c.uuid,b.adminUrl="/admin/admin.html?uuid="+b.eventID,g.location.href=b.adminUrl,d.eventID=a.eventID,console.log("New Event Started"),console.log(a.eventID)})},b.eventSourceUrl="/api/adminLiveTweets?uuid="+d.eventID;var k=new EventSource(b.eventSourceUrl);k.addEventListener("message",function(a){b.tweet=JSON.parse(a.data),b.$apply(function(){b.tweetsQueue.push(b.tweet),b.tweetsCount=b.tweetsQueue.length},!1)}),b.pagesShown=1,b.pageSize=20,b.tweetsQueueLimit=function(){return b.pageSize*b.pagesShown},b.loadMoreButton=function(){return b.pagesShown<b.tweetsCount/b.pageSize},b.loadMoreTweets=function(){b.pagesShown=b.pagesShown+1},b.removedTweetsCount=0,b.removeTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.removeTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.removedTweetsCount++,console.log("Tweet Removed")})},b.approvedTweetsCount=0,b.approveTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.approveTweet(e,c).then(function(a){console.log("Tweet Approved"),$("#"+c).remove(),b.approvedTweetsCount++})},b.approveStarred=function(a){var b=$(a.currentTarget).parent().parent().parent().attr("id"),d={action:"approve_starred",tweet_id:b},e=c.post("do",d);e.success(function(a,c,d,e){"OK"==a?$("#"+b).remove():alert(a)})},b.stopEventHandler=function(){var a=d.eventID;h.stopEvent(a).then(function(a){b.eventStarted=!1,b.$broadcast("timer-stop"),b.timerRunning=!1,b.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),console.log("Event Stopped")})},b.updateViewOptions=function(){var a=d.eventID,b=j.userColor(),c=j.userSize();h.updateViewOptions(a,b,c).then(function(d){console.log("Options Updated"),console.log(a),console.log(b),console.log(c)})}}]),eventAdminApp.controller("AppController",["$scope","FileUploader",function(a,b){var c=a.uploader=new b({url:"upload.php"});c.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}})}]),eventAdminApp.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]);var eventAdminApp=angular.module("eventAdminApp",["ui.bootstrap","timer","ngCookies","angularFileUpload"]);eventAdminApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),eventAdminApp.filter("reverseQueue",function(){return function(a){return a.slice().reverse()}}),eventAdminApp.factory("appVar",function(a){return{eventHashtag:function(){return a.eventHashtag=$("#eventHashtag").val(),""!==a.eventHashtag||a.eventHashtag.length>=3?a.eventHashtag:""},link:function(){return"http://www.twitter.com"}}}),eventAdminApp.factory("getData",["$http","$rootScope","appVar","$cookies","$cookieStore",function(a,b,c,d,e){return{startEvent:function(c){var d=$("#eventHashtag").val();return a({method:"POST",url:"/api/events",data:{hashTags:[d]}}).success(function(a){return b.eventID=a.uuid,a.uuid}).error(function(){console.log("Request failed")})},stopEvent:function(c){return b.stopEventUrl="/api/events/"+c,a({method:"DELETE",url:b.stopEventUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},approveTweet:function(c,d){return b.approveTweetUrl="http://localhost:8080/api/events/"+c+"/approvedTweets/"+d,a({method:"POST",url:b.approveTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},removeTweet:function(c,d){return b.removeTweetUrl="api/events/"+c+"/blockedTweets/"+d,a({method:"POST",url:b.removeTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},updateViewOptions:function(c,d,e){return b.updateViewOptionsUrl="api/events/"+c+"/config",b.userScreen=["Small","Normal","Large"],a({method:"PUT",url:b.updateViewOptionsUrl,data:{backgroundColor:d,screens:b.userScreen,size:e}}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed"),console.log(c),console.log(d),console.log(b.userScreen),console.log(e)})}}}]),eventAdminApp.factory("shareData",function(a,b,c,d){return a.layoutColors=["black","turquoise","blue","violet","pink","green","orange"],a.layoutColor=function(c){a.userColor=a.layoutColors[c],b.userColor=a.userColor},a.layoutSizes=["Small","Normal","Large"],a.layoutSize=function(c){a.userSize=a.layoutSizes[c],b.userSize=a.userSize},{userColor:function(){return b.userColor},userSize:function(){return b.userSize}}}),eventAdminApp.controller("liveViewCtrl",function(a,b,c,d,e,f){}),eventAdminApp.factory("getTrustedUsers",function(){var a={};return a.data=[{name:"iMomenUI",img:"../assets/images/user-image-1.png"},{name:"JustSmileDad",img:"../assets/images/user-image-2.png"},{name:"AngularJS",img:"../assets/images/user-image-3.png"}],a}),eventAdminApp.controller("trustedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"trustedUsers.html",controller:"trustedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("trustedUsersCtrl",function(a,b,c){a.items=c,a.addTrustedUsername=function(){c.data.push({name:a.trustedUsername,img:"../assets/images/user-image-1.png"})},a.deleteTrustedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.factory("getBlockedUsers",function(){var a={};return a.data=[{name:"UQU",img:"../assets/images/user-image-6.png"},{name:"OSN",img:"../assets/images/user-image-4.png"},{name:"GISTIC",img:"../assets/images/user-image-1.png"}],a}),eventAdminApp.controller("blockedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"blockedUsers.html",controller:"blockedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("blockedUsersCtrl",function(a,b,c){a.items=c,a.addBlockedUsername=function(){c.data.push({name:a.blockedUsername,img:"../assets/images/user-image-1.png"})},a.deleteBlockedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.run(function(a){a.eventID}),eventAdminApp.controller("startEventCtrl",["$rootScope","$scope","$http","$cookies","$cookieStore","$location","$window","getData","appVar","shareData",function(a,b,c,d,e,f,g,h,i,j){a.userColor=j.userColor(),a.userSize=j.userSize(),b.eventStarted=!1,b.timerRunning=!1,b.tweetsQueue=[],b.tweetsCount=0,b.tweet={},b.startEventHandler=function(c){b.$broadcast("timer-start"),b.timerRunning=!0,h.startEvent().success(function(c){b.eventStarted=!0,a.eventID=c.uuid,b.adminUrl="/admin/admin.html?uuid="+b.eventID,g.location.href=b.adminUrl,d.eventID=a.eventID,console.log("New Event Started"),console.log(a.eventID)})},b.eventSourceUrl="/api/adminLiveTweets?uuid="+d.eventID;var k=new EventSource(b.eventSourceUrl);k.addEventListener("message",function(a){b.tweet=JSON.parse(a.data),b.$apply(function(){b.tweetsQueue.push(b.tweet),b.tweetsCount=b.tweetsQueue.length},!1)}),b.pagesShown=1,b.pageSize=20,b.tweetsQueueLimit=function(){return b.pageSize*b.pagesShown},b.loadMoreButton=function(){return b.pagesShown<b.tweetsCount/b.pageSize},b.loadMoreTweets=function(){b.pagesShown=b.pagesShown+1},b.removedTweetsCount=0,b.removeTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.removeTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.removedTweetsCount++,console.log("Tweet Removed")})},b.approvedTweetsCount=0,b.approveTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.approveTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():console.log("ERROR"),b.approvedTweetsCount++,console.log("Tweet Approved")})},b.approveStarred=function(a){var b=$(a.currentTarget).parent().parent().parent().attr("id"),d={action:"approve_starred",tweet_id:b},e=c.post("do",d);e.success(function(a,c,d,e){"OK"==a?$("#"+b).remove():alert(a)})},b.stopEventHandler=function(){var a=d.eventID;h.stopEvent(a).then(function(a){b.eventStarted=!1,b.$broadcast("timer-stop"),b.timerRunning=!1,b.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),console.log("Event Stopped")})},b.updateViewOptions=function(){var a=d.eventID,b=j.userColor(),c=j.userSize();h.updateViewOptions(a,b,c).then(function(d){console.log("Options Updated"),console.log(a),console.log(b),console.log(c)})}}]),eventAdminApp.controller("AppController",["$scope","FileUploader",function(a,b){var c=a.uploader=new b({url:"upload.php"});c.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}})}]),eventAdminApp.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]);var eventAdminApp=angular.module("eventAdminApp",["ui.bootstrap","timer","ngCookies","angularFileUpload"]);eventAdminApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),eventAdminApp.filter("reverseQueue",function(){return function(a){return a.slice().reverse()}}),eventAdminApp.factory("appVar",function(a){return{eventHashtag:function(){return a.eventHashtag=$("#eventHashtag").val(),""!==a.eventHashtag||a.eventHashtag.length>=3?a.eventHashtag:""},link:function(){return"http://www.twitter.com"}}}),eventAdminApp.factory("getData",["$http","$rootScope","appVar","$cookies","$cookieStore",function(a,b,c,d,e){return{startEvent:function(c){var d=$("#eventHashtag").val();return a({method:"POST",url:"/api/events",data:{hashTags:[d]}}).success(function(a){return b.eventID=a.uuid,a.uuid}).error(function(){console.log("Request failed")})},stopEvent:function(c){return b.stopEventUrl="/api/events/"+c,a({method:"DELETE",url:b.stopEventUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},approveTweet:function(c,d){return b.approveTweetUrl="http://localhost:8080/api/events/"+c+"/approvedTweets/"+d,a({method:"POST",url:b.approveTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},removeTweet:function(c,d){return b.removeTweetUrl="api/events/"+c+"/blockedTweets/"+d,a({method:"POST",url:b.removeTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},updateViewOptions:function(c,d,e){return b.updateViewOptionsUrl="api/events/"+c+"/config",b.userScreen=["Small","Normal","Large"],a({method:"PUT",url:b.updateViewOptionsUrl,data:{backgroundColor:d,screens:b.userScreen,size:e}}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed"),console.log(c),console.log(d),console.log(b.userScreen),console.log(e)})}}}]),eventAdminApp.factory("shareData",function(a,b,c,d){return a.layoutColors=["black","turquoise","blue","violet","pink","green","orange"],a.layoutColor=function(c){a.userColor=a.layoutColors[c],b.userColor=a.userColor},a.layoutSizes=["Small","Normal","Large"],a.layoutSize=function(c){a.userSize=a.layoutSizes[c],b.userSize=a.userSize},{userColor:function(){return b.userColor},userSize:function(){return b.userSize}}}),eventAdminApp.controller("liveViewCtrl",function(a,b,c,d,e,f){}),eventAdminApp.factory("getTrustedUsers",function(){var a={};return a.data=[{name:"iMomenUI",img:"../assets/images/user-image-1.png"},{name:"JustSmileDad",img:"../assets/images/user-image-2.png"},{name:"AngularJS",img:"../assets/images/user-image-3.png"}],a}),eventAdminApp.controller("trustedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"trustedUsers.html",controller:"trustedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("trustedUsersCtrl",function(a,b,c){a.items=c,a.addTrustedUsername=function(){c.data.push({name:a.trustedUsername,img:"../assets/images/user-image-1.png"})},a.deleteTrustedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.factory("getBlockedUsers",function(){var a={};return a.data=[{name:"UQU",img:"../assets/images/user-image-6.png"},{name:"OSN",img:"../assets/images/user-image-4.png"},{name:"GISTIC",img:"../assets/images/user-image-1.png"}],a}),eventAdminApp.controller("blockedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"blockedUsers.html",controller:"blockedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("blockedUsersCtrl",function(a,b,c){a.items=c,a.addBlockedUsername=function(){c.data.push({name:a.blockedUsername,img:"../assets/images/user-image-1.png"})},a.deleteBlockedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.run(function(a){a.eventID}),eventAdminApp.controller("startEventCtrl",["$rootScope","$scope","$http","$cookies","$cookieStore","$location","$window","getData","appVar","shareData",function(a,b,c,d,e,f,g,h,i,j){a.userColor=j.userColor(),a.userSize=j.userSize(),b.eventStarted=!1,b.timerRunning=!1,b.tweetsQueue=[],b.tweetsCount=0,b.tweet={},b.startEventHandler=function(c){b.$broadcast("timer-start"),b.timerRunning=!0,h.startEvent().success(function(c){b.eventStarted=!0,a.eventID=c.uuid,b.adminUrl="/admin/admin.html?uuid="+b.eventID,g.location.href=b.adminUrl,d.eventID=a.eventID,console.log("New Event Started"),console.log(a.eventID)})},b.eventSourceUrl="/api/adminLiveTweets?uuid="+d.eventID;var k=new EventSource(b.eventSourceUrl);k.addEventListener("message",function(a){b.tweet=JSON.parse(a.data),b.$apply(function(){b.tweetsQueue.push(b.tweet),b.tweetsCount=b.tweetsQueue.length},!1)}),b.pagesShown=1,b.pageSize=20,b.tweetsQueueLimit=function(){return b.pageSize*b.pagesShown},b.loadMoreButton=function(){return b.pagesShown<b.tweetsCount/b.pageSize},b.loadMoreTweets=function(){b.pagesShown=b.pagesShown+1},b.removedTweetsCount=0,b.removeTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.removeTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.removedTweetsCount++,console.log("Tweet Removed")})},b.approvedTweetsCount=0,b.approveTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.approveTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():console.log(data),b.approvedTweetsCount++,console.log("Tweet Approved")})},b.approveStarred=function(a){var b=$(a.currentTarget).parent().parent().parent().attr("id"),d={action:"approve_starred",tweet_id:b},e=c.post("do",d);e.success(function(a,c,d,e){"OK"==a?$("#"+b).remove():alert(a)})},b.stopEventHandler=function(){var a=d.eventID;h.stopEvent(a).then(function(a){b.eventStarted=!1,b.$broadcast("timer-stop"),b.timerRunning=!1,b.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),console.log("Event Stopped")})},b.updateViewOptions=function(){var a=d.eventID,b=j.userColor(),c=j.userSize();h.updateViewOptions(a,b,c).then(function(d){console.log("Options Updated"),console.log(a),console.log(b),console.log(c)})}}]),eventAdminApp.controller("AppController",["$scope","FileUploader",function(a,b){var c=a.uploader=new b({url:"upload.php"});c.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}})}]),eventAdminApp.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]);var eventAdminApp=angular.module("eventAdminApp",["ui.bootstrap","timer","ngCookies","angularFileUpload"]);eventAdminApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),eventAdminApp.filter("reverseQueue",function(){return function(a){return a.slice().reverse()}}),eventAdminApp.factory("appVar",function(a){return{eventHashtag:function(){return a.eventHashtag=$("#eventHashtag").val(),""!==a.eventHashtag||a.eventHashtag.length>=3?a.eventHashtag:""},link:function(){return"http://www.twitter.com"}}}),eventAdminApp.factory("getData",["$http","$rootScope","appVar","$cookies","$cookieStore",function(a,b,c,d,e){return{startEvent:function(c){var d=$("#eventHashtag").val();return a({method:"POST",url:"/api/events",data:{hashTags:[d]}}).success(function(a){return b.eventID=a.uuid,a.uuid}).error(function(){console.log("Request failed")})},stopEvent:function(c){return b.stopEventUrl="/api/events/"+c,a({method:"DELETE",url:b.stopEventUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},approveTweet:function(c,d){return b.approveTweetUrl="http://localhost:8080/api/events/"+c+"/approvedTweets/"+d,a({method:"POST",url:b.approveTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},removeTweet:function(c,d){return b.removeTweetUrl="api/events/"+c+"/blockedTweets/"+d,a({method:"POST",url:b.removeTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},updateViewOptions:function(c,d,e){return b.updateViewOptionsUrl="api/events/"+c+"/config",b.userScreen=["Small","Normal","Large"],a({method:"PUT",url:b.updateViewOptionsUrl,data:{backgroundColor:d,screens:b.userScreen,size:e}}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed"),console.log(c),console.log(d),console.log(b.userScreen),console.log(e)})}}}]),eventAdminApp.factory("shareData",function(a,b,c,d){return a.layoutColors=["black","turquoise","blue","violet","pink","green","orange"],a.layoutColor=function(c){a.userColor=a.layoutColors[c],b.userColor=a.userColor},a.layoutSizes=["Small","Normal","Large"],a.layoutSize=function(c){a.userSize=a.layoutSizes[c],b.userSize=a.userSize},{userColor:function(){return b.userColor},userSize:function(){return b.userSize}}}),eventAdminApp.controller("liveViewCtrl",function(a,b,c,d,e,f){}),eventAdminApp.factory("getTrustedUsers",function(){var a={};return a.data=[{name:"iMomenUI",img:"../assets/images/user-image-1.png"},{name:"JustSmileDad",img:"../assets/images/user-image-2.png"},{name:"AngularJS",img:"../assets/images/user-image-3.png"
}],a}),eventAdminApp.controller("trustedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"trustedUsers.html",controller:"trustedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("trustedUsersCtrl",function(a,b,c){a.items=c,a.addTrustedUsername=function(){c.data.push({name:a.trustedUsername,img:"../assets/images/user-image-1.png"})},a.deleteTrustedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.factory("getBlockedUsers",function(){var a={};return a.data=[{name:"UQU",img:"../assets/images/user-image-6.png"},{name:"OSN",img:"../assets/images/user-image-4.png"},{name:"GISTIC",img:"../assets/images/user-image-1.png"}],a}),eventAdminApp.controller("blockedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"blockedUsers.html",controller:"blockedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("blockedUsersCtrl",function(a,b,c){a.items=c,a.addBlockedUsername=function(){c.data.push({name:a.blockedUsername,img:"../assets/images/user-image-1.png"})},a.deleteBlockedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.run(function(a){a.eventID}),eventAdminApp.controller("startEventCtrl",["$rootScope","$scope","$http","$cookies","$cookieStore","$location","$window","getData","appVar","shareData",function(a,b,c,d,e,f,g,h,i,j){a.userColor=j.userColor(),a.userSize=j.userSize(),b.eventStarted=!1,b.timerRunning=!1,b.tweetsQueue=[],b.tweetsCount=0,b.tweet={},b.startEventHandler=function(c){b.$broadcast("timer-start"),b.timerRunning=!0,h.startEvent().success(function(c){b.eventStarted=!0,a.eventID=c.uuid,b.adminUrl="/admin/admin.html?uuid="+b.eventID,g.location.href=b.adminUrl,d.eventID=a.eventID,console.log("New Event Started"),console.log(a.eventID)})},b.eventSourceUrl="/api/adminLiveTweets?uuid="+d.eventID;var k=new EventSource(b.eventSourceUrl);k.addEventListener("message",function(a){b.tweet=JSON.parse(a.data),b.$apply(function(){b.tweetsQueue.push(b.tweet),b.tweetsCount=b.tweetsQueue.length},!1)}),b.pagesShown=1,b.pageSize=20,b.tweetsQueueLimit=function(){return b.pageSize*b.pagesShown},b.loadMoreButton=function(){return b.pagesShown<b.tweetsCount/b.pageSize},b.loadMoreTweets=function(){b.pagesShown=b.pagesShown+1},b.removedTweetsCount=0,b.removeTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.removeTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.removedTweetsCount++,console.log("Tweet Removed")})},b.approvedTweetsCount=0,b.approveTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.approveTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.approvedTweetsCount++,console.log("Tweet Approved")})},b.approveStarred=function(a){var b=$(a.currentTarget).parent().parent().parent().attr("id"),d={action:"approve_starred",tweet_id:b},e=c.post("do",d);e.success(function(a,c,d,e){"OK"==a?$("#"+b).remove():alert(a)})},b.stopEventHandler=function(){var a=d.eventID;h.stopEvent(a).then(function(a){b.eventStarted=!1,b.$broadcast("timer-stop"),b.timerRunning=!1,b.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),console.log("Event Stopped")})},b.updateViewOptions=function(){var a=d.eventID,b=j.userColor(),c=j.userSize();h.updateViewOptions(a,b,c).then(function(d){console.log("Options Updated"),console.log(a),console.log(b),console.log(c)})}}]),eventAdminApp.controller("AppController",["$scope","FileUploader",function(a,b){var c=a.uploader=new b({url:"upload.php"});c.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}})}]),eventAdminApp.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]);var eventAdminApp=angular.module("eventAdminApp",["ui.bootstrap","timer","ngCookies","angularFileUpload"]);eventAdminApp.directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}),eventAdminApp.filter("reverseQueue",function(){return function(a){return a.slice().reverse()}}),eventAdminApp.factory("appVar",function(a){return{eventHashtag:function(){return a.eventHashtag=$("#eventHashtag").val(),""!==a.eventHashtag||a.eventHashtag.length>=3?a.eventHashtag:""},link:function(){return"http://www.twitter.com"}}}),eventAdminApp.factory("getData",["$http","$rootScope","appVar","$cookies","$cookieStore",function(a,b,c,d,e){return{startEvent:function(c){var d=$("#eventHashtag").val();return a({method:"POST",url:"/api/events",data:{hashTags:[d]}}).success(function(a){return b.eventID=a.uuid,a.uuid}).error(function(){console.log("Request failed")})},stopEvent:function(c){return b.stopEventUrl="/api/events/"+c,a({method:"DELETE",url:b.stopEventUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},approveTweet:function(c,d){return b.approveTweetUrl="api/events/"+c+"/approvedTweets/"+d,a({method:"POST",url:b.approveTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},removeTweet:function(c,d){return b.removeTweetUrl="api/events/"+c+"/blockedTweets/"+d,a({method:"POST",url:b.removeTweetUrl}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed")})},updateViewOptions:function(c,d,e){return b.updateViewOptionsUrl="api/events/"+c+"/config",b.userScreen=["Small","Normal","Large"],a({method:"PUT",url:b.updateViewOptionsUrl,data:{backgroundColor:d,screens:b.userScreen,size:e}}).success(function(){console.log("Request successed")}).error(function(){console.log("Request failed"),console.log(c),console.log(d),console.log(b.userScreen),console.log(e)})}}}]),eventAdminApp.factory("shareData",function(a,b,c,d){return a.layoutColors=["black","turquoise","blue","violet","pink","green","orange"],a.layoutColor=function(c){a.userColor=a.layoutColors[c],b.userColor=a.userColor},a.layoutSizes=["Small","Normal","Large"],a.layoutSize=function(c){a.userSize=a.layoutSizes[c],b.userSize=a.userSize},{userColor:function(){return b.userColor},userSize:function(){return b.userSize}}}),eventAdminApp.controller("liveViewCtrl",function(a,b,c,d,e,f){}),eventAdminApp.factory("getTrustedUsers",function(){var a={};return a.data=[{name:"iMomenUI",img:"../assets/images/user-image-1.png"},{name:"JustSmileDad",img:"../assets/images/user-image-2.png"},{name:"AngularJS",img:"../assets/images/user-image-3.png"}],a}),eventAdminApp.controller("trustedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"trustedUsers.html",controller:"trustedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("trustedUsersCtrl",function(a,b,c){a.items=c,a.addTrustedUsername=function(){c.data.push({name:a.trustedUsername,img:"../assets/images/user-image-1.png"})},a.deleteTrustedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.factory("getBlockedUsers",function(){var a={};return a.data=[{name:"UQU",img:"../assets/images/user-image-6.png"},{name:"OSN",img:"../assets/images/user-image-4.png"},{name:"GISTIC",img:"../assets/images/user-image-1.png"}],a}),eventAdminApp.controller("blockedUsersModalCtrl",function(a,b){a.open=function(){b.open({templateUrl:"blockedUsers.html",controller:"blockedUsersCtrl",size:"sm"})}}),eventAdminApp.controller("blockedUsersCtrl",function(a,b,c){a.items=c,a.addBlockedUsername=function(){c.data.push({name:a.blockedUsername,img:"../assets/images/user-image-1.png"})},a.deleteBlockedUsername=function(a){c.data.splice(a,1)},a.cancel=function(){b.dismiss("cancel")}}),eventAdminApp.run(function(a){a.eventID}),eventAdminApp.controller("startEventCtrl",["$rootScope","$scope","$http","$cookies","$cookieStore","$location","$window","getData","appVar","shareData",function(a,b,c,d,e,f,g,h,i,j){a.userColor=j.userColor(),a.userSize=j.userSize(),b.eventStarted=!1,b.timerRunning=!1,b.tweetsQueue=[],b.tweetsCount=0,b.tweet={},b.startEventHandler=function(c){b.$broadcast("timer-start"),b.timerRunning=!0,h.startEvent().success(function(c){b.eventStarted=!0,a.eventID=c.uuid,b.adminUrl="/admin/admin.html?uuid="+b.eventID,g.location.href=b.adminUrl,d.eventID=a.eventID,console.log("New Event Started"),console.log(a.eventID)})},b.eventSourceUrl="/api/adminLiveTweets?uuid="+d.eventID;var k=new EventSource(b.eventSourceUrl);k.addEventListener("message",function(a){b.tweet=JSON.parse(a.data),b.$apply(function(){b.tweetsQueue.push(b.tweet),b.tweetsCount=b.tweetsQueue.length},!1)}),b.pagesShown=1,b.pageSize=20,b.tweetsQueueLimit=function(){return b.pageSize*b.pagesShown},b.loadMoreButton=function(){return b.pagesShown<b.tweetsCount/b.pageSize},b.loadMoreTweets=function(){b.pagesShown=b.pagesShown+1},b.removedTweetsCount=0,b.removeTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.removeTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.removedTweetsCount++,console.log("Tweet Removed")})},b.approvedTweetsCount=0,b.approveTweet=function(a){var c=$(a.currentTarget).parent().parent().parent().attr("id"),e=d.eventID;h.approveTweet(e,c).then(function(a){"OK"==a?$("#"+c).remove():alert(data),b.approvedTweetsCount++,console.log("Tweet Approved")})},b.approveStarred=function(a){var b=$(a.currentTarget).parent().parent().parent().attr("id"),d={action:"approve_starred",tweet_id:b},e=c.post("do",d);e.success(function(a,c,d,e){"OK"==a?$("#"+b).remove():alert(a)})},b.stopEventHandler=function(){var a=d.eventID;h.stopEvent(a).then(function(a){b.eventStarted=!1,b.$broadcast("timer-stop"),b.timerRunning=!1,b.$on("timer-stopped",function(a,b){console.log("Timer Stopped - data = ",b)}),console.log("Event Stopped")})},b.updateViewOptions=function(){var a=d.eventID,b=j.userColor(),c=j.userSize();h.updateViewOptions(a,b,c).then(function(d){console.log("Options Updated"),console.log(a),console.log(b),console.log(c)})}}]),eventAdminApp.controller("AppController",["$scope","FileUploader",function(a,b){var c=a.uploader=new b({url:"upload.php"});c.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(c)}})}]),eventAdminApp.directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]);
