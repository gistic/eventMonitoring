/*! eventMonitoringProject 2015-05-14 */nvar viewsLayoutController=angular.module("viewsLayoutController",[]);viewsLayoutController.controller("layoutCtrl",function($rootScope,$scope,$timeout,$location,RequestData,CreateEventSource){var source=CreateEventSource.getSourceObject();source.addEventListener("broadcast-ui-customization",function(response){$scope.layoutOptions=JSON.parse(response.data),$scope.$apply(function(){$rootScope.userColor=$scope.layoutOptions.backgroundColor,$rootScope.userSize=$scope.layoutOptions.size,$rootScope.pages=$scope.layoutOptions.screens,$rootScope.pagesTimeout=$scope.layoutOptions.screenTimes,$rootScope.eventHashtag=$scope.layoutOptions.hashtags})}),$rootScope.getViewOptions=function(){var requestAction="GET",apiUrl="/api/events/"+$rootScope.eventID+"/config",requestData="";RequestData.fetchData(requestAction,apiUrl,requestData).success(function(response){$rootScope.userColor=response.backgroundColor,$rootScope.userSize=response.size,$rootScope.pagesTimeout=response.screenTimes,$rootScope.pages=response.screens,$rootScope.eventHashtags=response.hashtags,$scope.pageIndex=$scope.pages.indexOf($location.path()),$scope.intervalFunction()}).error(function(){console.log("#")})},$scope.test=function(){$rootScope.getViewOptions()},$scope.intervalFunction=function(){$timeout(function(){$location.path($scope.pages[$scope.pageIndex]),$scope.intervalFunction()},$scope.pagesTimeout[$scope.pageIndex]),$scope.pageIndex=($scope.pageIndex+1)%3}});