/*! eventMonitoringProject 2015-05-14 */nvar tweetsOverTimeController=angular.module("tweetsOverTimeController",[]);tweetsOverTimeController.controller("TweetsOverTimeController",["$scope","$rootScope","$http","$timeout","RequestData",function($scope,$rootScope,$http,$timeout,RequestData){$scope.chartConfig={options:{chart:{type:"areaspline",height:450,backgroundColor:"rgba(255, 255, 255, 0.01)"},title:{text:""}}},$scope.tweetsTime=[],$scope.tweetsCount=[],$scope.fetchData=function(){var requestAction="GET",apiUrl="/api/events/"+$rootScope.eventID+"/overTime",tweetsTimeRate=1,tweetsOverSpecificTime=-1,requestData={sampleRate:tweetsTimeRate,period:tweetsOverSpecificTime};RequestData.fetchData(requestAction,apiUrl,requestData).then(function(response){function drawTweetsOverTimeChart(){var arrayLength=$scope.data.length,tweetsCountArray=[],tweetsTimeArray=[];$scope.totalTweets=0;for(var i=0;arrayLength>i;i++)tweetsCountArray[i]=$scope.data[i].tweets_count,$scope.totalTweets+=$scope.data[i].tweets_count,tweetsTimeArray[i]=$scope.data[i].time;$scope.chartSeries=[{name:"",data:tweetsCountArray,connectNulls:!0,showInLegend:!1,id:"tweetsChart",color:"rgba(3, 19, 47,0.7)"}],$scope.chartConfig={options:{chart:{type:"areaspline",animation:{duration:1500},height:450,backgroundColor:"rgba(255, 255, 255, 0.01)"},plotOptions:{series:{stacking:"",connectNulls:!0},areaspline:{}}},xAxis:{categories:tweetsTimeArray,dateTimeLabelFormats:{minute:"%H:%M",hour:"%H:%M"},type:"datetime",lineWidth:3,labels:{enabled:!1,style:{color:"#fff",font:"11px Trebuchet MS, Verdana, sans-serif"}}},yAxis:{plotLines:[{value:0,width:1,color:"#ffffff"}],title:{text:"Number Of Tweets",style:{color:"#fff",font:"11px Trebuchet MS, Verdana, sans-serif"}},labels:{enabled:!0,style:{color:"#fff",font:"11px Trebuchet MS, Verdana, sans-serif"}},tickWidth:0,gridLineWidth:0},series:$scope.chartSeries,credits:{enabled:!1},loading:!1,title:{text:""}},$scope.reflow=function(){$scope.$broadcast("highchartsng.reflow")}}$scope.data=response.data,$scope.tweetsTime=response.data.time,$scope.tweetsCount=response.data.tweets_count,drawTweetsOverTimeChart()})},$scope.fetchData()}]);